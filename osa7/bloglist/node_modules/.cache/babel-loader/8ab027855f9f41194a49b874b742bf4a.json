{"ast":null,"code":"import _slicedToArray from \"/home/s015sir/git/fullstack/osa7/bloglist/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/s015sir/git/fullstack/osa7/bloglist/src/components/Blog.js\";\nimport React, { useState } from 'react';\nimport { showInfo, showError } from '../reducers/notificationReducer';\nimport { likeBlog, deleteBlog } from '../reducers/blogReducer';\nimport { connect } from 'react-redux';\n\nconst Blog = props => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        opened = _useState2[0],\n        setOpened = _useState2[1];\n\n  const hideWhenOpened = {\n    display: opened ? 'none' : ''\n  };\n  const showWhenOpened = {\n    display: opened ? '' : 'none'\n  };\n\n  const toggleOpened = () => {\n    setOpened(!opened);\n  };\n\n  const handleLike = async event => {\n    event.preventDefault();\n\n    try {\n      const updatedBlog = {\n        id: props.id,\n        title: props.title,\n        author: props.author,\n        url: props.url,\n        likes: props.likes\n      };\n      props.likeBlog(updatedBlog, props.user.token);\n      props.showInfo('liked a blog', 3);\n    } catch (exception) {\n      console.log('exception: ' + exception);\n      props.showError('error in updating likes', 3);\n    }\n  };\n\n  const handleDelete = async () => {\n    try {\n      props.deleteBlog(props.id, props.user.token);\n      props.showInfo('blog deleted', 3);\n    } catch (exception) {\n      console.log('exception: ' + exception);\n      props.showError('error in deleting blog', 3);\n    }\n  };\n\n  const confirmDelete = () => {\n    if (window.confirm(\"remove blog \" + props.title + \" by \" + props.author + \"?\")) {\n      handleDelete();\n    }\n  };\n  /*\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n    }\n  }, [])\n  */\n\n\n  if (props.user != null) {\n    return React.createElement(\"div\", {\n      className: \"blogItem\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: hideWhenOpened,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"blogClosed\",\n      onClick: toggleOpened,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \" > \", props.title, \" \", props.author)), React.createElement(\"div\", {\n      style: showWhenOpened,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"blogOpened\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: handleLike,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      onClick: toggleOpened,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \" < \", props.title, \" \", props.author), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }), props.url, \" \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), props.likes, \" likes \", React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"like\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), \"added by \", props.user.name, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"deleteButton\",\n      type: \"button\",\n      onClick: confirmDelete,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"delete\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }))))));\n  }\n};\n\nconst mapStateToProps = state => {\n  return {\n    blogs: state.user\n  };\n};\n\nconst mapDispatchToProps = {\n  showInfo,\n  showError,\n  likeBlog,\n  deleteBlog\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Blog);","map":{"version":3,"sources":["/home/s015sir/git/fullstack/osa7/bloglist/src/components/Blog.js"],"names":["React","useState","showInfo","showError","likeBlog","deleteBlog","connect","Blog","props","opened","setOpened","hideWhenOpened","display","showWhenOpened","toggleOpened","handleLike","event","preventDefault","updatedBlog","id","title","author","url","likes","user","token","exception","console","log","handleDelete","confirmDelete","window","confirm","name","mapStateToProps","state","blogs","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport { showInfo, showError } from '../reducers/notificationReducer'\nimport { likeBlog, deleteBlog } from '../reducers/blogReducer'\nimport { connect } from 'react-redux'\n\nconst Blog = (props)  => {\n\n  const [opened, setOpened] = useState(false)\n  const hideWhenOpened = { display: opened ? 'none' : '' }\n  const showWhenOpened = { display: opened ? '' : 'none' }\n\n  const toggleOpened = () => {\n    setOpened(!opened)\n  }\n\n  const handleLike = async (event) => {\n    event.preventDefault()\n    \n    try {\n      const updatedBlog = {\n        id: props.id,\n        title: props.title,\n        author: props.author,\n        url: props.url,\n        likes: props.likes\n      }\n      props.likeBlog(updatedBlog, props.user.token)\n      props.showInfo('liked a blog', 3)\n    } catch (exception) {\n      console.log('exception: '+exception)\n      props.showError('error in updating likes', 3)\n    }\n  }\n\n  const handleDelete = async () => {    \n    try {\n      props.deleteBlog(props.id, props.user.token)\n      props.showInfo('blog deleted', 3)\n    } catch (exception) {\n      console.log('exception: '+exception)\n      props.showError('error in deleting blog', 3)\n    }\n  }\n\n  const confirmDelete = () => {\n    if(window.confirm(\"remove blog \"+props.title+\" by \"+props.author+\"?\")){\n      handleDelete()\n    }\n\n  }\n\n  /*\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n    }\n  }, [])\n  */\n\n  if(props.user != null){\n  return(\n    <div className=\"blogItem\">\n    <div style={hideWhenOpened}>\n      <div className=\"blogClosed\" onClick={toggleOpened}> &gt; {props.title} {props.author}</div>\n    </div>\n    <div style={showWhenOpened}>\n       <div className=\"blogOpened\">\n          <form onSubmit={handleLike}>\n            <div>\n              <div onClick={toggleOpened}> &lt; {props.title} {props.author}</div><br/>\n              {props.url} <br/>\n              {props.likes} likes <button type=\"submit\">like</button><br/>\n              added by {props.user.name}<br/>\n              <button className=\"deleteButton\" type=\"button\" onClick={confirmDelete}>delete</button><br/>\n            </div>\n          </form>\n        </div>\n    </div>\n  </div>\n)}\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    blogs: state.user\n  }\n}\n\nconst mapDispatchToProps = {\n  showInfo, showError, likeBlog, deleteBlog\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Blog)\n"]},"metadata":{},"sourceType":"module"}