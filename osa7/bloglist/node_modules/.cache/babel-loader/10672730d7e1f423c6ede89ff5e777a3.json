{"ast":null,"code":"import _slicedToArray from \"/home/s015sir/git/fullstack/osa5/bloglist-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/s015sir/git/fullstack/osa5/bloglist-frontend/src/components/NewBlog.js\";\nimport React, { useState, useEffect } from 'react';\nimport blogsService from '../services/blogs';\n\nconst NewBlog = ({\n  setBlogs,\n  setNotificationMessage,\n  setErrorMessage,\n  blogFormRef\n}) => {\n  const _useState = useState(''),\n        _useState2 = _slicedToArray(_useState, 2),\n        title = _useState2[0],\n        setTitle = _useState2[1];\n\n  const _useState3 = useState(''),\n        _useState4 = _slicedToArray(_useState3, 2),\n        author = _useState4[0],\n        setAuthor = _useState4[1];\n\n  const _useState5 = useState(''),\n        _useState6 = _slicedToArray(_useState5, 2),\n        url = _useState6[0],\n        setUrl = _useState6[1];\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser');\n\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON);\n      blogsService.setToken(user.token);\n    }\n  }, []);\n\n  const handlePost = async event => {\n    event.preventDefault();\n\n    try {\n      blogFormRef.current.toggleVisibility();\n      const newBlog = {\n        title: title,\n        author: author,\n        url: url\n      };\n      await blogsService.create(newBlog);\n      setBlogs((await blogsService.getAll()));\n      setTitle('');\n      setAuthor('');\n      setUrl('');\n      setNotificationMessage('added new blog');\n      setTimeout(() => {\n        setNotificationMessage(null);\n      }, 3000);\n    } catch (exception) {\n      console.log('exception: ' + exception);\n      setErrorMessage('error in adding new blog');\n      setTimeout(() => {\n        setErrorMessage(null);\n      }, 3000);\n    }\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"New blog\"), React.createElement(\"form\", {\n    onSubmit: handlePost,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, \"title\", React.createElement(\"input\", {\n    type: \"text\",\n    value: title,\n    name: \"title\",\n    onChange: ({\n      target\n    }) => setTitle(target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, \"author\", React.createElement(\"input\", {\n    type: \"text\",\n    value: author,\n    name: \"author\",\n    onChange: ({\n      target\n    }) => setAuthor(target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"url\", React.createElement(\"input\", {\n    type: \"text\",\n    value: url,\n    name: \"url\",\n    onChange: ({\n      target\n    }) => setUrl(target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"create\")));\n};\n\nexport default NewBlog;","map":{"version":3,"sources":["/home/s015sir/git/fullstack/osa5/bloglist-frontend/src/components/NewBlog.js"],"names":["React","useState","useEffect","blogsService","NewBlog","setBlogs","setNotificationMessage","setErrorMessage","blogFormRef","title","setTitle","author","setAuthor","url","setUrl","loggedUserJSON","window","localStorage","getItem","user","JSON","parse","setToken","token","handlePost","event","preventDefault","current","toggleVisibility","newBlog","create","getAll","setTimeout","exception","console","log","target","value"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport blogsService from '../services/blogs'\n\nconst NewBlog = ({setBlogs, setNotificationMessage, setErrorMessage, blogFormRef}) => {\n  const [title, setTitle] = useState('') \n  const [author, setAuthor] = useState('') \n  const [url, setUrl] = useState('') \n \n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      blogsService.setToken(user.token)\n    }\n  }, [])\n\n  const handlePost = async (event) => {\n    event.preventDefault()\n    \n    try {\n      blogFormRef.current.toggleVisibility()\n      const newBlog = {\n        title: title,\n        author: author,\n        url: url\n      }\n      await blogsService.create(newBlog)\n      setBlogs(await blogsService.getAll())\n      setTitle('')\n      setAuthor('')\n      setUrl('')\n      setNotificationMessage('added new blog')\n      setTimeout(() => {\n        setNotificationMessage(null)\n      }, 3000)\n    } catch (exception) {\n      console.log('exception: '+exception)\n      setErrorMessage('error in adding new blog')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 3000)\n    }\n  }\n\n\n  return(\n    <div>\n    <h3>New blog</h3>\n    <form onSubmit={handlePost}>\n      <div>\n        title\n          <input\n          type=\"text\"\n          value={title}\n          name=\"title\"\n          onChange={({ target }) => setTitle(target.value)}\n        />\n      </div>\n      <div>\n        author\n          <input\n          type=\"text\"\n          value={author}\n          name=\"author\"\n          onChange={({ target }) => setAuthor(target.value)}\n        />\n      </div>\n      <div>\n        url\n          <input\n          type=\"text\"\n          value={url}\n          name=\"url\"\n          onChange={({ target }) => setUrl(target.value)}\n        />\n      </div>\n      <button type=\"submit\">create</button>\n    </form>\n    </div>\n  )\n}\n\nexport default NewBlog"]},"metadata":{},"sourceType":"module"}