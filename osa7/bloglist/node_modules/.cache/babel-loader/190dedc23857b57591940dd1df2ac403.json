{"ast":null,"code":"import _slicedToArray from \"/home/s015sir/git/fullstack/osa7/bloglist/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/s015sir/git/fullstack/osa7/bloglist/src/components/Blog.js\";\nimport React, { useState, useEffect } from 'react';\nimport { showInfo, showError } from '../reducers/notificationReducer';\nimport { likeBlog, deleteBlog } from '../reducers/blogReducer';\nimport { connect } from 'react-redux';\n\nconst Blog = props => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        opened = _useState2[0],\n        setOpened = _useState2[1];\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        user = _useState4[0],\n        setUser = _useState4[1];\n\n  const hideWhenOpened = {\n    display: opened ? 'none' : ''\n  };\n  const showWhenOpened = {\n    display: opened ? '' : 'none'\n  };\n\n  const toggleOpened = () => {\n    setOpened(!opened);\n  };\n\n  const handleLike = async event => {\n    event.preventDefault();\n\n    try {\n      const updatedBlog = {\n        id: props.id,\n        title: props.title,\n        author: props.author,\n        url: props.url,\n        likes: props.likes\n      };\n      props.likeBlog(updatedBlog, user.token);\n      props.showInfo('liked a blog', 3);\n    } catch (exception) {\n      console.log('exception: ' + exception);\n      props.showError('error in updating likes', 3);\n    }\n  };\n\n  const handleDelete = async () => {\n    try {\n      props.deleteBlog(props.id, user.token);\n      props.showInfo('blog deleted', 3);\n    } catch (exception) {\n      console.log('exception: ' + exception);\n      props.showError('error in deleting blog', 3);\n    }\n  };\n\n  const confirmDelete = () => {\n    if (window.confirm(\"remove blog \" + props.title + \" by \" + props.author + \"?\")) {\n      handleDelete();\n    }\n  };\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser');\n\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON);\n      setUser(user);\n    }\n  }, []);\n  return React.createElement(\"div\", {\n    className: \"blogItem\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: hideWhenOpened,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"blogClosed\",\n    onClick: toggleOpened,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \" > \", props.title, \" \", props.author)), React.createElement(\"div\", {\n    style: showWhenOpened,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"blogOpened\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: handleLike,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    onClick: toggleOpened,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \" < \", props.title, \" \", props.author), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }), props.url, \" \", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }), props.likes, \" likes \", React.createElement(\"button\", {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"like\"), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }), \"added by \", props.user.name, React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"deleteButton\",\n    type: \"button\",\n    onClick: confirmDelete,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, \"delete\"), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }))))));\n};\n/*\nconst mapStateToProps = (state) => {\n  return {\n    blogs: state.blogs\n  }\n}\n*/\n\n\nconst mapDispatchToProps = {\n  showInfo,\n  showError,\n  likeBlog,\n  deleteBlog\n};\nexport default connect( //mapStateToProps,\nnull, mapDispatchToProps)(Blog);","map":{"version":3,"sources":["/home/s015sir/git/fullstack/osa7/bloglist/src/components/Blog.js"],"names":["React","useState","useEffect","showInfo","showError","likeBlog","deleteBlog","connect","Blog","props","opened","setOpened","user","setUser","hideWhenOpened","display","showWhenOpened","toggleOpened","handleLike","event","preventDefault","updatedBlog","id","title","author","url","likes","token","exception","console","log","handleDelete","confirmDelete","window","confirm","loggedUserJSON","localStorage","getItem","JSON","parse","name","mapDispatchToProps"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,iCAApC;AACA,SAASC,QAAT,EAAmBC,UAAnB,QAAqC,yBAArC;AACA,SAASC,OAAT,QAAwB,aAAxB;;AAEA,MAAMC,IAAI,GAAIC,KAAD,IAAY;AAAA,oBAEKR,QAAQ,CAAC,KAAD,CAFb;AAAA;AAAA,QAEhBS,MAFgB;AAAA,QAERC,SAFQ;;AAAA,qBAGCV,QAAQ,CAAC,IAAD,CAHT;AAAA;AAAA,QAGhBW,IAHgB;AAAA,QAGVC,OAHU;;AAIvB,QAAMC,cAAc,GAAG;AAAEC,IAAAA,OAAO,EAAEL,MAAM,GAAG,MAAH,GAAY;AAA7B,GAAvB;AACA,QAAMM,cAAc,GAAG;AAAED,IAAAA,OAAO,EAAEL,MAAM,GAAG,EAAH,GAAQ;AAAzB,GAAvB;;AAEA,QAAMO,YAAY,GAAG,MAAM;AACzBN,IAAAA,SAAS,CAAC,CAACD,MAAF,CAAT;AACD,GAFD;;AAIA,QAAMQ,UAAU,GAAG,MAAOC,KAAP,IAAiB;AAClCA,IAAAA,KAAK,CAACC,cAAN;;AAEA,QAAI;AACF,YAAMC,WAAW,GAAG;AAClBC,QAAAA,EAAE,EAAEb,KAAK,CAACa,EADQ;AAElBC,QAAAA,KAAK,EAAEd,KAAK,CAACc,KAFK;AAGlBC,QAAAA,MAAM,EAAEf,KAAK,CAACe,MAHI;AAIlBC,QAAAA,GAAG,EAAEhB,KAAK,CAACgB,GAJO;AAKlBC,QAAAA,KAAK,EAAEjB,KAAK,CAACiB;AALK,OAApB;AAOAjB,MAAAA,KAAK,CAACJ,QAAN,CAAegB,WAAf,EAA4BT,IAAI,CAACe,KAAjC;AACAlB,MAAAA,KAAK,CAACN,QAAN,CAAe,cAAf,EAA+B,CAA/B;AACD,KAVD,CAUE,OAAOyB,SAAP,EAAkB;AAClBC,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAcF,SAA1B;AACAnB,MAAAA,KAAK,CAACL,SAAN,CAAgB,yBAAhB,EAA2C,CAA3C;AACD;AACF,GAjBD;;AAmBA,QAAM2B,YAAY,GAAG,YAAY;AAC/B,QAAI;AACFtB,MAAAA,KAAK,CAACH,UAAN,CAAiBG,KAAK,CAACa,EAAvB,EAA2BV,IAAI,CAACe,KAAhC;AACAlB,MAAAA,KAAK,CAACN,QAAN,CAAe,cAAf,EAA+B,CAA/B;AACD,KAHD,CAGE,OAAOyB,SAAP,EAAkB;AAClBC,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAcF,SAA1B;AACAnB,MAAAA,KAAK,CAACL,SAAN,CAAgB,wBAAhB,EAA0C,CAA1C;AACD;AACF,GARD;;AAUA,QAAM4B,aAAa,GAAG,MAAM;AAC1B,QAAGC,MAAM,CAACC,OAAP,CAAe,iBAAezB,KAAK,CAACc,KAArB,GAA2B,MAA3B,GAAkCd,KAAK,CAACe,MAAxC,GAA+C,GAA9D,CAAH,EAAsE;AACpEO,MAAAA,YAAY;AACb;AAEF,GALD;;AAOA7B,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMiC,cAAc,GAAGF,MAAM,CAACG,YAAP,CAAoBC,OAApB,CAA4B,mBAA5B,CAAvB;;AACA,QAAIF,cAAJ,EAAoB;AAClB,YAAMvB,IAAI,GAAG0B,IAAI,CAACC,KAAL,CAAWJ,cAAX,CAAb;AACAtB,MAAAA,OAAO,CAACD,IAAD,CAAP;AACD;AACF,GANQ,EAMN,EANM,CAAT;AAQA,SACE;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA;AAAK,IAAA,KAAK,EAAEE,cAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,YAAf;AAA4B,IAAA,OAAO,EAAEG,YAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAA0DR,KAAK,CAACc,KAAhE,OAAwEd,KAAK,CAACe,MAA9E,CADF,CADA,EAIA;AAAK,IAAA,KAAK,EAAER,cAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG;AAAM,IAAA,QAAQ,EAAEE,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,OAAO,EAAED,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAmCR,KAAK,CAACc,KAAzC,OAAiDd,KAAK,CAACe,MAAvD,CADF,EACsE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADtE,EAEGf,KAAK,CAACgB,GAFT,OAEc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFd,EAGGhB,KAAK,CAACiB,KAHT,aAGsB;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAHtB,EAGyD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHzD,eAIYjB,KAAK,CAACG,IAAN,CAAW4B,IAJvB,EAI4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJ5B,EAKE;AAAQ,IAAA,SAAS,EAAC,cAAlB;AAAiC,IAAA,IAAI,EAAC,QAAtC;AAA+C,IAAA,OAAO,EAAER,aAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cALF,EAKwF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALxF,CADF,CADH,CADH,CAJA,CADF;AAmBA,CA1EF;AA4EA;;;;;;;;;AAQA,MAAMS,kBAAkB,GAAG;AACzBtC,EAAAA,QADyB;AACfC,EAAAA,SADe;AACJC,EAAAA,QADI;AACMC,EAAAA;AADN,CAA3B;AAIA,eAAeC,OAAO,EACpB;AACA,IAFoB,EAGpBkC,kBAHoB,CAAP,CAIbjC,IAJa,CAAf","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { showInfo, showError } from '../reducers/notificationReducer'\nimport { likeBlog, deleteBlog } from '../reducers/blogReducer'\nimport { connect } from 'react-redux'\n\nconst Blog = (props)  => {\n\n  const [opened, setOpened] = useState(false)\n  const [user, setUser] = useState(null)\n  const hideWhenOpened = { display: opened ? 'none' : '' }\n  const showWhenOpened = { display: opened ? '' : 'none' }\n\n  const toggleOpened = () => {\n    setOpened(!opened)\n  }\n\n  const handleLike = async (event) => {\n    event.preventDefault()\n    \n    try {\n      const updatedBlog = {\n        id: props.id,\n        title: props.title,\n        author: props.author,\n        url: props.url,\n        likes: props.likes\n      }\n      props.likeBlog(updatedBlog, user.token)\n      props.showInfo('liked a blog', 3)\n    } catch (exception) {\n      console.log('exception: '+exception)\n      props.showError('error in updating likes', 3)\n    }\n  }\n\n  const handleDelete = async () => {    \n    try {\n      props.deleteBlog(props.id, user.token)\n      props.showInfo('blog deleted', 3)\n    } catch (exception) {\n      console.log('exception: '+exception)\n      props.showError('error in deleting blog', 3)\n    }\n  }\n\n  const confirmDelete = () => {\n    if(window.confirm(\"remove blog \"+props.title+\" by \"+props.author+\"?\")){\n      handleDelete()\n    }\n\n  }\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n    }\n  }, [])\n\n  return(\n    <div className=\"blogItem\">\n    <div style={hideWhenOpened}>\n      <div className=\"blogClosed\" onClick={toggleOpened}> &gt; {props.title} {props.author}</div>\n    </div>\n    <div style={showWhenOpened}>\n       <div className=\"blogOpened\">\n          <form onSubmit={handleLike}>\n            <div>\n              <div onClick={toggleOpened}> &lt; {props.title} {props.author}</div><br/>\n              {props.url} <br/>\n              {props.likes} likes <button type=\"submit\">like</button><br/>\n              added by {props.user.name}<br/>\n              <button className=\"deleteButton\" type=\"button\" onClick={confirmDelete}>delete</button><br/>\n            </div>\n          </form>\n        </div>\n    </div>\n  </div>\n)}\n\n/*\nconst mapStateToProps = (state) => {\n  return {\n    blogs: state.blogs\n  }\n}\n*/\n\nconst mapDispatchToProps = {\n  showInfo, showError, likeBlog, deleteBlog\n}\n\nexport default connect(\n  //mapStateToProps,\n  null,\n  mapDispatchToProps\n)(Blog)\n"]},"metadata":{},"sourceType":"module"}